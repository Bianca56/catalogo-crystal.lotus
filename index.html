<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crystal Lotus - Cat치logo</title>
    
    <!-- 1. DISE칌O: Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. CEREBRO: React y ReactDOM (Cloudflare) -->
    <script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- 3. TRADUCTOR: Babel -->
    <script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600;700&display=swap');
        body { font-family: 'Fredoka', sans-serif; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .loader { border: 4px solid #fce7f3; border-top: 4px solid #ec4899; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-yellow-50 text-gray-700 selection:bg-pink-200">
    
    <div id="root">
        <div class="min-h-screen flex flex-col items-center justify-center p-4 text-center">
            <div class="loader mb-4"></div>
            <h2 class="text-2xl font-bold text-pink-500 mb-2">Cargando tu Tienda...</h2>
        </div>
    </div>

    <script type="text/babel">
        // --- ICONOS ---
        const Icons = {
            ShoppingBag: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>,
            Plus: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
            Edit2: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>,
            Trash2: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
            X: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 18 18"/></svg>,
            Search: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            Smartphone: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="14" height="20" x="5" y="2" rx="2" ry="2"/><path d="M12 18h.01"/></svg>,
            Save: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>,
            Lock: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>,
            Unlock: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg>,
            Settings: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            Upload: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>,
            Heart: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>,
            Sparkles: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></svg>,
            Gift: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"/></svg>,
            Instagram: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width={p.size||24} height={p.size||24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
        };

        const { useState, useEffect } = React;

        // --- PRODUCTOS INICIALES (VAC칈O) ---
        const InitialProducts = [];

        // --- CONFIGURACI칍N INICIAL (EDITABLE) ---
        const InitialConfig = { 
            storeName: "Crystal Lotus", 
            storeSubtitle: "Regaler칤a", 
            logoUrl: "", 
            currency: "ARS",
            whatsappNumber: "5491125573160", 
            instagramUser: "@crystal_lotus.nb" 
        };

        const formatPrice = (price) => new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS', minimumFractionDigits: 0 }).format(price);

        const ProductCard = ({ product, isAdmin, onEdit, onDelete, config }) => {
            const whatsappLink = `https://wa.me/${config.whatsappNumber}?text=Hola ${config.storeName}! 游눘 Me interesa: ${product.name} - ${formatPrice(product.price)}`;

            return (
                <div className="group relative bg-white rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-2 transition-all duration-300 overflow-hidden border-2 border-pink-100 flex flex-col h-full">
                    {product.inStock ? (
                        <div className="absolute top-3 left-3 z-10 bg-white/90 backdrop-blur text-pink-500 text-xs font-bold px-3 py-1 rounded-full shadow-sm flex items-center gap-1">
                            <Icons.Sparkles size={12} /> Disponible
                        </div>
                    ) : (
                        <div className="absolute top-3 left-3 z-10 bg-gray-800 text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm">Agotado</div>
                    )}
                    <div className="relative h-64 overflow-hidden bg-pink-50">
                        <img src={product.image} alt={product.name} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onError={(e) => {e.target.src = 'https://images.unsplash.com/photo-1628149455676-1463e2646394?auto=format&fit=crop&q=80&w=800'}} />
                    </div>
                    <div className="p-5 flex flex-col flex-grow relative">
                        <div className="mb-1"><span className="text-xs uppercase tracking-wider text-teal-500 font-extrabold bg-teal-50 px-2 py-1 rounded-md">{product.category}</span></div>
                        <h3 className="text-xl font-bold text-gray-700 leading-tight mb-2 font-fredoka">{product.name}</h3>
                        <p className="text-gray-500 text-sm line-clamp-2 mb-4 flex-grow font-medium">{product.description}</p>
                        
                        {product.variants && product.variants.length > 0 && product.variants[0] !== "" && (
                            <div className="flex flex-wrap gap-2 mb-4">
                                {product.variants.map((variant, idx) => (
                                    <span key={idx} className="text-xs text-purple-600 px-2 py-1 rounded-full bg-purple-50 border border-purple-100">{variant}</span>
                                ))}
                            </div>
                        )}
                        <div className="flex items-center justify-between mt-auto pt-4 border-t border-dashed border-pink-200">
                            <span className="text-2xl font-black text-pink-500 font-fredoka">{product.price > 0 ? formatPrice(product.price) : <span className="text-sm">Consultar</span>}</span>
                            {isAdmin ? (
                                <div className="flex gap-2">
                                    <button onClick={() => onEdit(product)} className="p-2 bg-yellow-100 text-yellow-600 rounded-2xl hover:bg-yellow-200 transition-colors"><Icons.Edit2 size={18} /></button>
                                    <button onClick={() => onDelete(product.id)} className="p-2 bg-red-100 text-red-500 rounded-2xl hover:bg-red-200 transition-colors"><Icons.Trash2 size={18} /></button>
                                </div>
                            ) : (
                                <a href={product.inStock ? whatsappLink : '#'} target="_blank" rel="noopener noreferrer" className={`flex items-center gap-2 px-4 py-2 rounded-2xl font-bold transition-all transform hover:scale-105 active:scale-95 ${product.inStock ? 'bg-gradient-to-r from-pink-400 to-purple-400 text-white shadow-lg shadow-pink-200' : 'bg-gray-100 text-gray-400 cursor-not-allowed'}`}>
                                    <span className="text-sm">춰Lo quiero!</span><Icons.Heart className="fill-current" size={16} />
                                </a>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-purple-900/30 backdrop-blur-sm animate-fade-in">
                    <div className="bg-white rounded-[2rem] w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl animate-bounce-up border-4 border-white">
                        <div className="flex justify-between items-center p-5 border-b border-dashed border-gray-200 bg-pink-50 rounded-t-[1.7rem]">
                            <h2 className="text-2xl font-bold text-gray-700 font-fredoka flex items-center gap-2"><Icons.Sparkles size={24} className="text-yellow-400" /> {title}</h2>
                            <button onClick={onClose} className="p-2 hover:bg-white rounded-full transition-colors text-gray-400 hover:text-pink-500"><Icons.X size={24} /></button>
                        </div>
                        <div className="p-6">{children}</div>
                    </div>
                </div>
            );
        };

        function App() {
            const [products, setProducts] = useState(InitialProducts);
            const [config, setConfig] = useState(InitialConfig);
            const [isAdmin, setIsAdmin] = useState(false);
            const [isProductModalOpen, setIsProductModalOpen] = useState(false);
            const [isConfigModalOpen, setIsConfigModalOpen] = useState(false);
            const [currentProduct, setCurrentProduct] = useState(null);
            const [searchTerm, setSearchTerm] = useState("");
            const [selectedCategory, setSelectedCategory] = useState("Todos");
            const [productForm, setProductForm] = useState({ name: '', price: '', description: '', image: '', category: '', variants: '', inStock: true });
            
            // Estado para el formulario de configuraci칩n, inicializado con los valores actuales
            const [configForm, setConfigForm] = useState(config);

            const categories = ["Todos", ...new Set(products.map(p => p.category))];

            // LocalStorage Key Nueva para empezar limpio
            useEffect(() => {
                const savedProducts = localStorage.getItem('crystalLotus_clean_v1_products');
                const savedConfig = localStorage.getItem('crystalLotus_clean_v1_config');
                if (savedProducts) setProducts(JSON.parse(savedProducts));
                if (savedConfig) setConfig(JSON.parse(savedConfig));
            }, []);

            useEffect(() => {
                localStorage.setItem('crystalLotus_clean_v1_products', JSON.stringify(products));
                localStorage.setItem('crystalLotus_clean_v1_config', JSON.stringify(config));
            }, [products, config]);

            const handleAdminToggle = () => {
                if (isAdmin) { setIsAdmin(false); } else {
                    const password = prompt("游 Ingresa la contrase침a de due침a:");
                    // CAMBIO DE PIN A 5656
                    if (password === "5656") { setIsAdmin(true); alert("춰Hola Due침a! 游눘"); } else if (password !== null) { alert("Contrase침a incorrecta 游뛂"); }
                }
            };

            const handleEdit = (product) => { setCurrentProduct(product); setProductForm({ ...product, variants: product.variants.join(', ') }); setIsProductModalOpen(true); };
            const handleDelete = (id) => { if (window.confirm('쮹orrar este producto tiernis? 游봌')) { setProducts(products.filter(p => p.id !== id)); } };
            const handleAddNew = () => { setCurrentProduct(null); setProductForm({ name: '', price: '', description: '', image: '', category: '', variants: '', inStock: true }); setIsProductModalOpen(true); };
            
            const handleProductSubmit = (e) => {
                e.preventDefault();
                const variantsArray = String(productForm.variants).split(',').map(v => v.trim());
                const productData = { ...productForm, price: parseFloat(productForm.price), variants: variantsArray, id: currentProduct ? currentProduct.id : Date.now() };
                if (currentProduct) { setProducts(products.map(p => p.id === currentProduct.id ? productData : p)); } else { setProducts([productData, ...products]); }
                setIsProductModalOpen(false);
            };

            const handleConfigSubmit = (e) => { e.preventDefault(); setConfig({ ...config, ...configForm }); setIsConfigModalOpen(false); };
            const handleImageUpload = (e, field, setFormState, formState) => { const file = e.target.files[0]; if (file) { const imageUrl = URL.createObjectURL(file); setFormState({ ...formState, [field]: imageUrl }); } };

            const filteredProducts = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase());
                const matchesCategory = selectedCategory === "Todos" || product.category === selectedCategory;
                return matchesSearch && matchesCategory;
            });

            return (
                <div className="min-h-screen pb-20 md:pb-0">
                    <nav className="bg-white/90 backdrop-blur-md sticky top-0 z-40 shadow-sm border-b-4 border-pink-100">
                        <div className="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                {config.logoUrl ? <img src={config.logoUrl} alt="Logo" className="h-12 w-auto object-contain rounded-xl hover:rotate-3 transition-transform" /> : <div className="bg-gradient-to-tr from-pink-400 to-purple-400 p-2.5 rounded-2xl text-white shadow-lg shadow-pink-200 rotate-3"><Icons.Gift size={24} /></div>}
                                <div><h1 className="text-2xl font-black text-gray-800 tracking-tight font-fredoka leading-none">{config.storeName}</h1><p className="text-xs font-bold text-pink-400 tracking-widest uppercase">{config.storeSubtitle}</p></div>
                            </div>
                            <div className="flex items-center gap-2">
                                {isAdmin && <button onClick={() => {setConfigForm(config); setIsConfigModalOpen(true)}} className="p-2 bg-gray-100 rounded-full text-gray-400 hover:text-purple-500 transition-colors"><Icons.Settings size={20} /></button>}
                                <button onClick={handleAdminToggle} className={`flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold transition-all shadow-sm ${isAdmin ? 'bg-purple-500 text-white' : 'bg-white text-gray-400 border border-gray-200'}`}>
                                    {isAdmin ? <Icons.Unlock size={14} /> : <Icons.Lock size={14} />}<span className="hidden sm:inline">{isAdmin ? 'Soy la Due침a' : 'Admin'}</span>
                                </button>
                            </div>
                        </div>
                    </nav>

                    <main className="max-w-6xl mx-auto px-4 py-8 min-h-[60vh]">
                        <div className="text-center py-8 mb-6 bg-white rounded-[3rem] shadow-sm border-2 border-pink-50 relative overflow-hidden">
                            <div c80&w=800", category: "Cuadernos", variants: ["30 Hojas", "50 Hojas", "Rayada", "Cuadriculada", "Lisa"], inStock: true },
            { id: 5, name: "Agenda Tapa R칤gida 365 D칤as", price: 15000, description: "Agenda anual para planificar tu d칤a a d칤a, metas y recordatorios.", image: "https://images.unsplash.com/photo-1506784365847-bbad939e9335?auto=format&fit=crop&q=80&w=800", category: "Agendas", variants: ["Portada a elecci칩n"], inStock: true },
            { id: 6, name: "Agenda para Pediatras", price: 20000, description: "Agenda profesional dise침ada para pediatras. Organiza turnos.", image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&q=80&w=800", category: "Agendas", variants: ["Pediatr칤a"], inStock: true },
            { id: 7, name: "Agenda para Manicuristas", price: 20000, description: "Agenda ideal para manicuristas. Organiza turnos y clientas.", image: "https://images.unsplash.com/photo-1522337660859-02fbefca4702?auto=format&fit=crop&q=80&w=800", category: "Agendas", variants: ["Manicur칤a"], inStock: true },
            { id: 8, name: "Photocards K-Pop Doble Faz", price: 800, description: "Photocards estilo coleccionable doble faz, excelente calidad.", image: "https://images.unsplash.com/photo-1612152843869-7d8719c8d002?auto=format&fit=crop&q=80&w=800", category: "Merch Fanmade", variants: ["Individual ($800)", "Pack x5 ($3.500)", "Pack x10 ($6.800)", "Pack x15 ($9.600)", "Pack x20 ($12.000)"], inStock: true },
            { id: 9, name: "Libro para Colorear (20 Ilust.)", price: 0, description: "Libro de tapa blanda con 20 dibujos listos para colorear.", image: "https://images.unsplash.com/photo-1513364776144-60967b0f800f?auto=format&fit=crop&q=80&w=800", category: "Papeler칤a Creativa", variants: ["Infantil", "Adulto"], inStock: true },
            { id: 10, name: "Pack Stickers Comunes", price: 2000, description: "Stickers de excelente calidad para decorar cuadernos.", image: "https://images.unsplash.com/photo-1572375992501-4b0892d50c69?auto=format&fit=crop&q=80&w=800", category: "Papeler칤a Creativa", variants: ["x10 ($2.000)", "x20 ($3.600)", "x30 ($5.100)", "x40 ($6.400)"], inStock: true },
            { id: 11, name: "Pack Stickers Resistentes al Agua", price: 2500, description: "Stickers durables ideales para botellas.", image: "https://images.unsplash.com/photo-1611566026373-c6c85447dbdc?auto=format&fit=crop&q=80&w=800", category: "Papeler칤a Creativa", variants: ["x5 ($2.500)", "x10 ($5.000)", "x20 ($9.000)", "x30 ($12.750)", "x40 ($16.000)"], inStock: true },
            { id: 12, name: "Impresi칩n de Fotos Alta Calidad", price: 1000, description: "Servicio de impresi칩n fotogr치fica, colores n칤tidos.", image: "https://images.unsplash.com/photo-1552168324-d612d77725e3?auto=format&fit=crop&q=80&w=800", category: "Impresiones Fotogr치ficas", variants: ["10x14 cm ($1.000)", "14x20 cm ($2.000)", "20x28 cm ($4.000)"], inStock: true },
            { id: 13, name: "Botella Pl치stica 750ml", price: 3500, description: "Botella reutilizable liviana y pr치ctica.", image: "https://images.unsplash.com/photo-1602143407151-011141950038?auto=format&fit=crop&q=80&w=800", category: "Accesorios", variants: ["Varios Colores"], inStock: true }
        ];

        const InitialConfig = { storeName: "Crystal Lotus", storeSubtitle: "Regaler칤a", logoUrl: "", currency: "ARS" };
        const CONTACT_INFO = { whatsappNumber: "5491125573160", whatsappDisplay: "11 2557-3160", instagramLink: "https://www.instagram.com/crystal_lotus.nb?igsh=MWJnODl2dmN1a3I3eg==", instagramUser: "@crystal_lotus.nb" };

        const formatPrice = (price) => new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS', minimumFractionDigits: 0 }).format(price);

        // --- COMPONENTES ---
        const ProductCard = ({ product, isAdmin, onEdit, onDelete }) => {
            const whatsappLink = `https://wa.me/${CONTACT_INFO.whatsappNumber}?text=Hola Crystal Lotus! 游눘 Me interesa: ${product.name} - ${formatPrice(product.price)}`;

            return (
                <div className="group relative bg-white rounded-3xl shadow-sm hover:shadow-xl hover:-translate-y-2 transition-all duration-300 overflow-hidden border-2 border-pink-100 flex flex-col h-full">
                    {product.inStock ? (
                        <div className="absolute top-3 left-3 z-10 bg-white/90 backdrop-blur text-pink-500 text-xs font-bold px-3 py-1 rounded-full shadow-sm flex items-center gap-1">
                            <Icons.Sparkles size={12} /> Disponible
                        </div>
                    ) : (
                        <div className="absolute top-3 left-3 z-10 bg-gray-800 text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm">Agotado</div>
                    )}
                    <div className="relative h-64 overflow-hidden bg-pink-50">
                        <img src={product.image} alt={product.name} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" onError={(e) => {e.target.src = 'https://images.unsplash.com/photo-1628149455676-1463e2646394?auto=format&fit=crop&q=80&w=800'}} />
                    </div>
                    <div className="p-5 flex flex-col flex-grow relative">
                        <div className="mb-1"><span className="text-xs uppercase tracking-wider text-teal-500 font-extrabold bg-teal-50 px-2 py-1 rounded-md">{product.category}</span></div>
                        <h3 className="text-xl font-bold text-gray-700 leading-tight mb-2 font-fredoka">{product.name}</h3>
                        <p className="text-gray-500 text-sm line-clamp-2 mb-4 flex-grow font-medium">{product.description}</p>
                        
                        {product.variants && product.variants.length > 0 && product.variants[0] !== "" && (
                            <div className="flex flex-wrap gap-2 mb-4">
                                {product.variants.map((variant, idx) => (
                                    <span key={idx} className="text-xs text-purple-600 px-2 py-1 rounded-full bg-purple-50 border border-purple-100">{variant}</span>
                                ))}
                            </div>
                        )}
                        <div className="flex items-center justify-between mt-auto pt-4 border-t border-dashed border-pink-200">
                            <span className="text-2xl font-black text-pink-500 font-fredoka">{product.price > 0 ? formatPrice(product.price) : <span className="text-sm">Consultar</span>}</span>
                            {isAdmin ? (
                                <div className="flex gap-2">
                                    <button onClick={() => onEdit(product)} className="p-2 bg-yellow-100 text-yellow-600 rounded-2xl hover:bg-yellow-200 transition-colors"><Icons.Edit2 size={18} /></button>
                                    <button onClick={() => onDelete(product.id)} className="p-2 bg-red-100 text-red-500 rounded-2xl hover:bg-red-200 transition-colors"><Icons.Trash2 size={18} /></button>
                                </div>
                            ) : (
                                <a href={product.inStock ? whatsappLink : '#'} target="_blank" rel="noopener noreferrer" className={`flex items-center gap-2 px-4 py-2 rounded-2xl font-bold transition-all transform hover:scale-105 active:scale-95 ${product.inStock ? 'bg-gradient-to-r from-pink-400 to-purple-400 text-white shadow-lg shadow-pink-200' : 'bg-gray-100 text-gray-400 cursor-not-allowed'}`}>
                                    <span className="text-sm">춰Lo quiero!</span><Icons.Heart className="fill-current" size={16} />
                                </a>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-purple-900/30 backdrop-blur-sm animate-fade-in">
                    <div className="bg-white rounded-[2rem] w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl animate-bounce-up border-4 border-white">
                        <div className="flex justify-between items-center p-5 border-b border-dashed border-gray-200 bg-pink-50 rounded-t-[1.7rem]">
                            <h2 className="text-2xl font-bold text-gray-700 font-fredoka flex items-center gap-2"><Icons.Sparkles size={24} className="text-yellow-400" /> {title}</h2>
                            <button onClick={onClose} className="p-2 hover:bg-white rounded-full transition-colors text-gray-400 hover:text-pink-500"><Icons.X size={24} /></button>
                        </div>
                        <div className="p-6">{children}</div>
                    </div>
                </div>
            );
        };

        function App() {
            const [products, setProducts] = useState(InitialProducts);
            const [config, setConfig] = useState(InitialConfig);
            const [isAdmin, setIsAdmin] = useState(false);
            const [isProductModalOpen, setIsProductModalOpen] = useState(false);
            const [isConfigModalOpen, setIsConfigModalOpen] = useState(false);
            const [currentProduct, setCurrentProduct] = useState(null);
            const [searchTerm, setSearchTerm] = useState("");
            const [selectedCategory, setSelectedCategory] = useState("Todos");
            const [productForm, setProductForm] = useState({ name: '', price: '', description: '', image: '', category: '', variants: '', inStock: true });
            const [configForm, setConfigForm] = useState({ storeName: '', storeSubtitle: '', logoUrl: '' });
            const categories = ["Todos", ...new Set(products.map(p => p.category))];

            useEffect(() => {
                const savedProducts = localStorage.getItem('crystalLotus_
